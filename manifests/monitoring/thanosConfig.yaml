{{- if not (index .thanos "disabled") }}
apiVersion: v1
kind: Secret
metadata:
  name: thanos-objstore-config
  namespace: monitoring
type: Opaque
stringData:
  thanos.yaml: |-
    type: S3
    config:
      bucket: {{.thanos.s3.bucket}}
      endpoint: {{.thanos.s3.endpoint | strings.TrimPrefix "http://"}}
      insecure: true
      access_key: {{.thanos.s3.access_key}}
      secret_key: {{.thanos.s3.secret_key}}
{{- end}}
